

# Реферальная система

### Стек технологий

Используется следующий стек технологий:
- Phyton 3
- Django 4
- Django REST Framework 3
- PostgreSQL 
- SwaggerUI
- celery
- redis
- Docker

### Описание

Простую реферальную систему.

Реализована логика и API для следующего функционала:

-	Авторизация по номеру телефона. Первый запрос на ввод номера телефона.
   >/users/user-create/ эндпоинт -  на который необходимо отправить номер телефона по ключу "phone"

-   Имитация отправки 4-х значного кода авторизации (задержка на сервере 3 сек). Второй запрос на ввод кода.
    >Сервисная функция set_auth_code генерирует 4-х значный кода авторизации
    /users/auth-user/ - эндпоинт на который необходимо отправить номер телефона "phone" и код авторизации "auth_code"
    При выполнении запроса на авторизацию четырехзначный цифровой код выводиться в консоль.

-	Код авторизации, а так же верификация телефона сбрасываются каждые 24 часа.
   >Сервисная функция reset_auth_code сбрасывает код авторизации и верификацию номера через заданное время  
    через периодическую задачу с использованием celery и redis, заданный время по умолчанию - 24 часа.

-	Если пользователь ранее не авторизовывался, то он записывается в бд.

-	Запрос на профиль пользователя.
   >/users/<int:pk>/ - эндпоинт для детального просмотра профиля пользователя

-	Запрос на список всех пользователей.
   >/users/<int:pk>/ - эндпоинт для просмотра списка всех пользователей

-	Пользователю при первой авторизации присваивается рандомно сгенерированный 6-значный инвайт-код(цифры и символы).
   >Сервисная функция set_self_invite генерирует 6-и значный инвайт-код из цифр и символов

-	В профиле у пользователя возможно ввести инвайт-код пригласившего "received_invite" (проверяется на существование). 
    В своем профиле можно активировать только 1 инвайт код, если пользователь уже когда-то активировал инвайт код, 
    то он выводится в соответсвующем поле в запросе на профиль пользователя.
   >/users/<int:pk>/update/ - эндпоинт для обновления профиля пользователя, необходимо указать id пользователя

-	В API профиля выводится список пользователей (номеров телефона), 
    которые ввели инвайт-код текущего пользователя.


### Запуск проекта

Для запуска проекта необходимо:

- Указать переменную SECRET_KEY для django в .env_docker

- Запустить проект с помощью Docker:

      $ docker-compose up


#### Примечание

* На стартовой странице доступна документация на реализованные методы API

